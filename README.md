# Primary pulse production and protein ingredient trade (2020–2024)

This repository contains raw data, processed data, analysis code and figures
supporting a system-level comparison between primary pulse production and trade
in derived protein ingredients (HS 210610) over the period 2020–2024.

The analysis combines FAOSTAT production data (tonnes) with UN Comtrade trade data
(imports and exports, Partner = World) to examine structural differences between
the spatial distribution of primary agricultural production and ingredient-level
trade activity.

## Repository structure

- `raw_data/`
  - `FAOSTAT_data_en_2-1-2026.xls`  
    FAOSTAT export of pulse production (tonnes), downloaded from the FAOSTAT
    database without modification.
  - `TradeData-3.xlsx`  
    UN Comtrade export for HS 210610 (protein concentrates and textured protein
    substances), including imports and exports aggregated by reporting economy
    (Partner = World).

- `processed_data/`
  - CSV files generated by the analysis script, including:
    - merged country–year datasets
    - concentration metrics (Top10 share, HHI)
    - country harmonisation diagnostics  
  These files are fully reproducible from the raw data using the provided code.

- `code/`
  - `compare_production_vs_trade_hubs.py`  
    Python script used to process raw data, compute concentration metrics and
    generate figures.

- `figures/`
  - Scatter plot comparing production and trade shares (mean 2020–2024)
  - Heatmap of yearly concentration (HHI)
  - Year-by-year scatter plots (supplementary figures)

## Analysis overview

Primary pulse production is moderately concentrated and relatively stable over
time, whereas trade in protein ingredients is less concentrated and shows
increasing dispersion across reporting economies. Overlap between leading
producers and leading trade hubs is limited, indicating that aggregation at the
ingredient level occurs downstream of primary agricultural production.

## Reproducibility

All figures and processed datasets were generated using the script in `code/`.
The script requires Python (>=3.9) and the following packages:

- pandas
- numpy
- matplotlib
- xlrd (for legacy FAOSTAT `.xls` files)

Example usage:

```bash
python code/compare_production_vs_trade_hubs.py \
  raw_data/TradeData-3.xlsx raw_data/FAOSTAT_data_en_2-1-2026.xls \
  --outdir figures --years 2020-2024 --make-yearly